function sleep(n){return new Promise(e=>setTimeout(e,n))}function getRndColor(n,e){var t=n+(e-n)*Math.random()|0,i=n+(e-n)*Math.random()|0,r=n+(e-n)*Math.random()|0;return"rgb("+t+","+i+","+r+")"}function lineBreak(n,e,t=-1,i="20px Corbel"){if(ret="",tmp=n,lineCnt=1,$("#hiddenSpan").attr("style","display:none;font:"+i),$("#hiddenSpan").html(n),$("#hiddenSpan").width()<=e)return n;for(;n.length>0&&(-1==t||-1!=t&&lineCnt<=t);){if(lineCnt==t){for(lineLen=1,$("#hiddenSpan").html(n.substr(0,lineLen));$("#hiddenSpan").width()<=e;){if(lineLen==n.length)return ret+=n.substr(0,lineLen),ret;lineLen+=1,$("#hiddenSpan").html(n.substr(0,lineLen))}for($("#hiddenSpan").html(n.substr(0,lineLen)+"...");$("#hiddenSpan").width()>e&&lineLen>0;)lineLen-=1,$("#hiddenSpan").html(n.substr(0,lineLen)+"...");return ret+=n.substr(0,lineLen)+"...",ret}for(lineLen=1,$("#hiddenSpan").html(n.substr(0,lineLen));$("#hiddenSpan").width()<=e;){if(lineLen==n.length)return ret+=n.substr(0,lineLen),ret;lineLen+=1,$("#hiddenSpan").html(n.substr(0,lineLen))}if(lineLen-=1,ret+=n.substr(0,lineLen)+"\n",n.length-lineLen<=0)break;n=n.substr(lineLen,n.length-lineLen),lineCnt+=1}return ret}function getWidth(n,e="20px Corbel"){return $("#hiddenSpan").attr("style","display:none;font:"+e),$("#hiddenSpan").html(n),$("#hiddenSpan").width()}CanvasRenderingContext2D.prototype.roundRect=function(n,e,t,i,r=40){return t<2*r&&(r=t/2),i<2*r&&(r=i/2),this.beginPath(),this.moveTo(n+r,e),this.arcTo(n+t,e,n+t,e+i,r),this.arcTo(n+t,e+i,n,e+i,r),this.arcTo(n,e+i,n,e,r),this.arcTo(n,e,n+t,e,r),this.closePath(),this.fill(),this};