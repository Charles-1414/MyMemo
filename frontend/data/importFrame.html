<html>

<head>
    <meta charset="utf-8" />
    <title>My Memo</title>

    <script src="/js/jquery-3.6.0.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/general.js"></script>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">

    <link href="/noty/noty.css" rel="stylesheet">
    <script src="/noty/noty.min.js" type="text/javascript"></script>
    <link href="/noty/themes/mint.css" rel="stylesheet">

    <link rel="icon" href="/img/icon.png">

    <script>
        $(document).ready(function () {
            $("#userId").val(localStorage.getItem("userId"));
            $("#token").val(localStorage.getItem("token"));
            bookList = [];
            $.ajax({
                url: "/api/book",
                method: 'POST',
                async: true,
                dataType: "json",
                data: {
                    userId: localStorage.getItem("userId"),
                    token: localStorage.getItem("token")
                },
                success: function (r) {
                    for (var i = 0; i < r.length; i++)
                        $("#book").append("<option value=" + r[i].bookId + ">" + r[i].name +
                            "</option>");
                }
            });
            $("#submit").click(function () {
                $("#form").hide();
                $("#uploading").show();
            });
        });
    </script>
</head>

<body>
    <form id="form" action="/api/data/import" method="POST" enctype="multipart/form-data">
        <div class="mb-3">
            <input class="form-control" type="file" name="file">
        </div>
        <br>
        <p>Upload Type:
            <div class="form-check">
                <input type="radio" id="append" name="updateType" value="append" checked class="form-check-input"
                    type="radio" name="flexRadioDefault">
                <label class="form-check-label" for="append">Append</label>
            </div>
            <div class="form-check">
                <input type="radio" id="overwrite" name="updateType" value="overwrite" class="form-check-input"
                    type="radio" name="flexRadioDefault">
                <label class="form-check-label" for="overwrite">Overwrite</label>
            </div>
            <div class="form-check">
                <input type="radio" id="clear_overwrite" name="updateType" value="clear_overwrite"
                    class="form-check-input" type="radio" name="flexRadioDefault">
                <label class="form-check-label" for="clear_overwrite">Clear & Overwrite</label>
            </div>
        </p>
        <p>Check duplicate question?
            <div class="form-check">
                <input type="radio" id="yes" name="checkDuplicate" value="yes" checked class="form-check-input"
                    type="radio" name="flexRadioDefault">
                <label class="form-check-label" for="yes">Yes</label>
            </div>
            <div class="form-check">
                <input type="radio" id="no" name="checkDuplicate" value="no" class="form-check-input" type="radio"
                    name="flexRadioDefault">
                <label class="form-check-label" for="no">No</label>
            </div>
        </p>
        <p>Add to book:
            <select name="bookId" id="book" class="form-select">
            </select>
        </p>
        <input type="text" id="userId" name="userId" style="display:none;" />
        <input type="text" id="token" name="token" style="display:none;" />
        <input type="text" id="requestId" name="requestId" style="display:none;" />
        <button id="submit" type="submit" class="btn btn-primary"><i class="fa fa-upload"></i> Import</button>
    </form>

    <p id="uploading" style="display:none">Uploading <i class='fa fa-spinner fa-spin'></i></p>

</body>

</html>