<html>

<head>
    <meta charset="utf-8" />
    <title>My Memo</title>

    <script src="/js/jquery-3.6.0.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/general.js"></script>
    <script src="/js/main.js"></script>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/main.css" rel="stylesheet">

    <link rel="stylesheet" href="/dataTables/jquery.dataTables.min.css">
    <script src="/dataTables/jquery.dataTables.min.js"></script>

    <link href="/noty/noty.css" rel="stylesheet">
    <script src="/noty/noty.min.js" type="text/javascript"></script>
    <link href="/noty/themes/mint.css" rel="stylesheet">

    <link rel="icon" href="/img/icon.png">

    <script>
        $(document).ready(function () {
            PageInit();
            UpdateBookDisplay();

            $("#content,#answer").click(function () {
                DisplayAnswer();
            });
            $("#question").click(function () {
                SpeakQuestion();
            });
            $("#answer").dblclick(function () {
                if ($("#answer").val() == "") DisplayAnswer();
                SpeakAnswer();
            });

            function onkeypress() {
                $("#start-from").on('keypress', function (e) {
                    if (e.which == 13 || e.which == 13 && e.ctrlKey) {
                        MemoGo();
                    }
                });
                $("#create-book-name").on('keypress', function (e) {
                    if (e.which == 13 || e.which == 13 && e.ctrlKey) {
                        CreateBook();
                    }
                });
                $("#book-btn").hover(function () {
                    ShowBook();
                });
                $("#content").hover(function () {
                    $("#book-div").fadeOut();
                });
            }

            if (localStorage.getItem("settings-theme") == "dark") {
                $("body").attr("style", "color:#ffffff;background-color:#333333");
                setInterval(function () {
                    $("#content a,.container a").css("color", "#dddddd");
                }, 500);
                $("hr").attr("style", "background-color:#cccccc;");
                $(".modal-content").attr("style", "background-color:#333333");
                $(".fa-times").attr("style", "color:white");
                $("textarea").css("color", "#ffffff");
                $("textarea").css("background-color", "#333333");
            } else {
                $("textarea").css("color", "#000000");
                $("textarea").css("background-color", "#ffffff");
            }

            $("#edit-question,#edit-answer").on('keypress', function (e) {
                if (e.which == 13 && e.ctrlKey) {
                    EditQuestion();
                }
            });

            setTimeout(onkeypress, 500);
        });
    </script>
</head>

<body>
    <div id="navigate" style="z-index:100">
        <div class="leftside">
            <div class="sqbtn">
                <a href="/"><img src="/img/icon.png" style="width:4em;height:4em"></a>
            </div>
            <div class="sqbtn">
                <a href="#" onclick="window.location.href='/book'" id="book-btn"><i class="fa fa-book"></i><br>Books</a>
            </div>
            <div class="sqbtn">
                <a href="#" onclick="window.location.href='/discovery'"><i
                        class="fa fa-paper-plane"></i><br>Discovery</a>
            </div>
        </div>
        <div class="userctrl" style="height:4.5em;min-width: 14em;">
            <a href='/user'><i class="fa fa-user"></i> <span id="navusername">Sign in&nbsp;&nbsp;  </span></a>
            <a class="only-signed-in" href='#' onclick="UserEvents()" style="display:none"><i class="fa fa-bell"></i></a>
            <a href='#' onclick="window.location.href='/settings'"><i class="fa fa-cogs"></i></a>
            <a class="only-signed-in" href='#' onclick="SignOut()" style="display:none"><i class="fa fa-sign-out"></i></a>
            <br>
            <div style="margin-top:0.5em;height:1.5em">
                <div class="progress" style="display:inline-block;width:80%;height:1.7em">
                    <div id="goal-progress" class="progress-bar progress-bar-striped progress-bar-animated"
                        role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"
                        style="width: 0%; height:1.7em">
                        <span>Goal: <span id="today-goal">0 / 0</span></span>
                    </div>
                </div>
                <button id="checkin-btn" class="btn btn-primary btn-sm" style="margin-top:-0.6em" type="button" onclick="CheckIn()" disabled><i class="fa fa-check-square-o"></i></button>
            </div>
        </div>
    </div>

    <div id="book-div" class="book-side" style="display:none">
        <div class="book-side-content">
            <h2 style="float:left">Books</h2>
            <button type="button" class="btn btn-outline-secondary" style="margin:0.5em" onclick="RefreshBookList()"
                id="book-list-refresh-btn"><i class="fa fa-refresh"></i></button>
            <button style="float:right" type="button" class="close" aria-label="Close"
                onclick="$('#book-div').fadeOut()">
                <span aria-hidden=" true"><i class="fa fa-times"></i></span>
            </button>

        </div>
        <div class="book-side-content-scroll" id="book-list">
            <div>
                <p>Create Book: </p>
                <div class="input-group mb-3 w-75">
                    <span class="input-group-text" id="basic-addon1">Name</span>
                    <input type="text" class="form-control" id="create-book-name" aria-describedby="basic-addon1">
                    <div class="input-group-append">
                        <button class="btn btn-outline-primary" type="button" onclick="CreateBook()">Create</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="content" class="container" style="padding:0">
        <div id="home" style="position:relative;padding-bottom:5em">
            <div class="center" style="padding-top:5em;line-height:50%">
                <h1>My Memo</h1>
                <div class="input-group mb-3 center" style="width:15em">
                    <span class="input-group-text" id="basic-addon1">From</span>
                    <input type="text" class="form-control" id="start-from" aria-describedby="basic-addon1"
                        style="z-index:100">
                </div>
                <button id="start-btn" type="button" class="btn btn-primary"
                    style="position:relative;width:10em;z-index:100" onclick="MemoGo()">Go <i
                        class='fa fa-play'></i></button>
                <div class="center" style="margin-top:1em">
                    <br>
                    <p>Book: <span id="book-name"></span></p>
                    <p><span id="mode"></span> Mode</p>
                </div>
            </div>
        </div>

        <div id="memo" style="display:none;padding-bottom:5em;z-index:100">
            <h1 class="title">My Memo</h1>
            <div id="navigate" style="z-index:100">
                <div class="top-right" style="top:4em;right:5em">
                    <button id="statistics-btn" type="button" class="btn btn-info control-btn control-btn-top"
                        onclick="Statistics()"><i class="fa fa-list-alt"></i> Statistics</button>
                    <br>
                    <button id="edit-btn" type="button" class="btn btn-info control-btn control-btn-top"
                        onclick="EditQuestionShow()"><i class="fa fa-edit"></i> Edit</button>
                    <br>
                    <button type="button" class="btn btn-primary control-btn control-btn-bottom ap-btn"
                        onclick="StopAutoPlayer()" style="display:none"><i class="fa fa-pause-circle"></i>
                        Pause</button>
                </div>
            </div>

            <div class="center" id="qa1">
                <textarea class="form-control question center" id="question" style="z-index:100"
                    readonly=true></textarea>
                <br><br>
                <textarea class="form-control answer center" id="answer" style="z-index:100" readonly=true></textarea>
            </div>

            <div class="center" id="qa2" style="display:none">
                <textarea class="form-control question center" id="cc-question"
                    style="z-index:100;height:3em;margin-bottom:0.5em" readonly=true></textarea>
                <div id="div-choice-0" class="choice" onclick="ChallengeChoice(0);">
                    <div id="choice-circle-0" class="choice-circle"></div>
                    <span id="choice-0"></span>
                </div>
                <div id="div-choice-1" class="choice" onclick="ChallengeChoice(1);">
                    <div id="choice-circle-1" class="choice-circle"></div>
                    <span id="choice-1"></span>
                </div>
                <div id="div-choice-2" class="choice" onclick="ChallengeChoice(2);">
                    <div id="choice-circle-2" class="choice-circle"></div>
                    <span id="choice-2"></span>
                </div>
                <div id="div-choice-3" class="choice" onclick="ChallengeChoice(3);">
                    <div id="choice-circle-3" class="choice-circle"></div>
                    <span id="choice-3"></span>
                </div>
            </div>

            <div id="practice-control" class="control center" style="display:none;z-index:100">
                <button type="button" class="btn btn-primary control-btn control-btn-left control-btn-top memo-tag"
                    onclick="MemoTag()">Tag <i class='fa fa-star'></i></button>
                <button type="button" class="btn btn-primary control-btn control-btn-right control-btn-top memo-delete"
                    onclick="MemoDelete()">Delete <i class="fa fa-trash"></i></button>
                <br>
                <button type="button"
                    class="btn btn-primary control-btn control-btn-left control-btn-bottom memo-previous"
                    onclick="MemoMove('previous')"><i class="fa fa-arrow-circle-left"></i> Previous</button>
                <button type="button" class="btn btn-primary control-btn control-btn-right control-btn-bottom memo-next"
                    onclick="MemoMove('next')">Next <i class="fa fa-arrow-circle-right"></i></button>
            </div>

            <div id="challenge-yesno-control" class="control center" style="display:none;z-index:100">
                <p style="padding-bottom:1em"><span id="challenge-msg">Do you remember it?</span></p>
                <button type="button"
                    class="btn btn-primary control-btn control-btn-left control-btn-top memo-challenge-yes"
                    onclick="MemoChallenge('yes')">Yes <i class='fa fa-check'></i></button>
                <button type="button"
                    class="btn btn-primary control-btn control-btn-right control-btn-top memo-challenge-no"
                    onclick="MemoChallenge('no')">No <i class='fa fa-times'></i></button>
                <br>
                <button type="button" class="btn btn-primary control-btn control-btn-left control-btn-top memo-tag"
                    onclick="MemoTag()">Tag <i class='fa fa-star'></i></button>
                <button type="button" class="btn btn-primary control-btn control-btn-right control-btn-top memo-delete"
                    onclick="MemoDelete()">Delete <i class="fa fa-trash"></i></button>
            </div>

            <div id="challenge-choice-control" class="control center" style="display:none;padding-top:1em;z-index:100">
                <button type="button" id="challenge-choice-continue"
                    class="btn btn-primary control-btn control-btn-left control-btn-top challenge-choice-continue"
                    onclick="ChallengeChoice(-1)">Continue <i class='fa fa-arrow-circle-right'></i></button>
                <button type="button" id="challenge-choice-continue"
                    class="btn btn-primary control-btn control-btn-right control-btn-top challenge-choice-continue"
                    onclick="ChallengeChoice(-1)">Continue <i class='fa fa-arrow-circle-right'></i></button>
                <br>
                <button type="button" class="btn btn-primary control-btn control-btn-left control-btn-top memo-tag"
                    onclick="MemoTag()">Tag <i class='fa fa-star'></i></button>
                <button type="button" class="btn btn-primary control-btn control-btn-right control-btn-top memo-delete"
                    onclick="MemoDelete()">Delete <i class="fa fa-trash"></i></button>
            </div>

            <div id="offline-control" class="control center" style="display:none;padding-top:2em;z-index:100">
                <button type="button"
                    class="btn btn-primary control-btn control-btn-left control-btn-bottom memo-previous"
                    onclick="MemoMove('previous')"><i class="fa fa-arrow-circle-left"></i> Previous</button>
                <button type="button" class="btn btn-primary control-btn control-btn-right control-btn-bottom memo-next"
                    onclick="MemoMove('next')">Next <i class="fa fa-arrow-circle-right"></i></button>
                <br>
            </div>
        </div>
    </div>

    <div class="modal fade" id="statisticsModal" tabindex="-1" role="dialog" aria-labelledby="statisticsModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="statisticsModalLabel">Statistics of <span
                            id="statisticsQuestion"></span>
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        onclick="$('#statisticsModal').modal('hide')">
                        <span aria-hidden=" true"><i class="fa fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body">
                    <p><span id="statisticsDetail"></span></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        onclick="$('#statisticsModal').modal('hide')">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editQuestionModal" tabindex="-1" role="dialog" aria-labelledby="editQuestionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Edit Question</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                        onclick="$('#editQuestionModal').modal('hide')">
                        <span aria-hidden=" true"><i class="fa fa-times"></i></span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="edit-question" class="col-form-label">Question:</label>
                            <textarea class="form-control" id="edit-question"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="edit-answer" class="col-form-label">Answer:</label>
                            <textarea class="form-control" id="edit-answer"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        onclick="$('#editQuestionModal').modal('hide')">Close</button>
                    <button type="button" class="btn btn-primary" onclick="EditQuestion()">Edit</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Copyright &copy; 2021 My Memo by <a href="https://www.charles14.xyz/">Charles</a></p>
        <p>Version: v5.3.12 <i class="fa fa-check-circle"></i></p>
        <p>Contact: <a href="mailto:memo@charles14.xyz">memo@charles14.xyz</a></p>
        <p>This is an open source project:
            <a href="https://github.com/Charles-1414/MyMemo"><i class="fa fa-github"></i>
                GitHub</a>
        </p>
        <p>Your privacy is valued. No 3rd party script is used. No cookie is used. All your local data
            is stored in Local Storage.</p>
    </div>
</body>

</html>