function lsGetItem(o,t=0){return null==localStorage.getItem(o)?(localStorage.setItem(o,t),t):localStorage.getItem(o)}function SessionExpired(){new Noty({theme:"mint",text:"Login session expired! Please login again!",type:"error",layout:"bottomRight",timeout:3e3}).show(),localStorage.removeItem("userId"),localStorage.removeItem("token"),setTimeout(GoToUser,3e3)}function BackToHome(){window.location.href="/"}function GoToUser(){window.location.href="/user"}function getUrlParameter(o){var t,e,r=window.location.search.substring(1),d=r.split("&");for(e=0;e<d.length;e++)if(t=d[e].split("="),t[0]===o)return void 0===typeof t[1]||decodeURIComponent(t[1]);return!1}function MapWordList(){wordListMap=new Map;for(var o=0;o<wordList.length;o++)wordListMap.set(wordList[o].wordId,{word:wordList[o].word,translation:wordList[o].translation,status:wordList[o].status})}function UpdateWordList(o=!0){$.ajax({url:"/api/wordBook/wordList",method:"POST",async:o,dataType:"json",data:{userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){wordList=o,localStorage.setItem("wordList",JSON.stringify(wordList)),MapWordList()}})}function UpdateWordBookList(o=!0){$.ajax({url:"/api/wordBook",method:"POST",async:o,dataType:"json",data:{userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){wordBookList=o,localStorage.setItem("word-book-list",JSON.stringify(wordBookList))}})}function SelectWords(){for(var o=0;o<wordBookList.length;o++)if(wordBookList[o].wordBookId==wordBookId)for(wordBookName=wordBookList[o].name,$(".title").html(wordBookName),$("title").html("Word Memo - "+wordBookName),wordBookShareCode=wordBookList[o].shareCode,""==wordBookShareCode?$("#wordBookShareCode").html("(Private)"):$("#wordBookShareCode").html(wordBookShareCode),""==wordBookShareCode?($("#shareop").html("Share"),$(".only-shared").hide()):($("#shareop").html("Unshare"),$(".only-shared").show()),groupId=wordBookList[o].groupId,groupCode=wordBookList[o].groupCode,$("#groupCode").html(groupCode),isGroupOwner=wordBookList[o].isGroupOwner,$(".group").show(),-1==groupId?($(".only-group-exist").hide(),$(".only-group-inexist").show(),$(".only-group-owner").hide()):($(".only-group-exist").show(),$(".only-group-inexist").hide(),$(".only-group-owner").hide()),isGroupOwner&&$(".only-group-owner").show(),0==wordBookId?$(".not-for-all-words").hide():$(".not-for-all-words").show(),selectedWordList=[],this.j=0;j<wordBookList[o].words.length;j++)wordId=wordBookList[o].words[j],wordData=wordListMap.get(wordId),selectedWordList.push({wordId:wordId,word:wordData.word,translation:wordData.translation,status:wordData.status})}function UpdateTable(){selected=[],table=$("#wordList").DataTable(),table.clear(),l=["","Default","Tagged","Deleted"];for(var o=0;o<selectedWordList.length;o++)table.row.add([[selectedWordList[o].word],[selectedWordList[o].translation],[l[selectedWordList[o].status]]]).node().id=selectedWordList[o].wordId;table.draw()}function PageInit(){-1==wordBookId&&(wordBookId=getUrlParameter("wordBookId")),table=$("#wordList").DataTable(),table.clear(),table.row.add([[""],["Loading <i class='fa fa-spinner fa-spin'></i>"],[""]]),table.draw(),table.clear(),0==wordBookId?$(".not-for-all-words").hide():$(".not-for-all-words").show(),$(".group").hide(),0!=wordList.length&&(MapWordList(),SelectWords(),UpdateTable()),$.ajax({url:"/api/wordBook/wordList",method:"POST",async:!0,dataType:"json",data:{userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){wordList=o,localStorage.setItem("word-list",JSON.stringify(wordList)),MapWordList(),$.ajax({url:"/api/wordBook",method:"POST",async:!0,dataType:"json",data:{userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){wordBookList=o,localStorage.setItem("word-book-list",JSON.stringify(wordBookList)),MapWordList(),SelectWords(),UpdateTable()}})}})}function EditWordShow(o){editWordId=o,word="",translation="";for(var t=0;t<selectedWordList.length;t++)if(selectedWordList[t].wordId==o){word=selectedWordList[t].word,translation=selectedWordList[t].translation;break}$("#editWordModalLabel").html("Edit Word"),$("#edit-word").val(word),$("#edit-translation").val(translation),$("#editWordModal").modal("toggle"),$("#edit-word-btn").html("Edit"),$("#edit-word-btn").attr("onclick","EditWord()")}function EditWordFromBtn(){1==selected.length?EditWordShow(selected[0]):new Noty({theme:"mint",text:"Make sure you selected one word!",type:"warning",layout:"bottomRight",timeout:3e3}).show()}function EditWord(){word=$("#edit-word").val(),translation=$("#edit-translation").val(),$.ajax({url:"/api/word/edit",method:"POST",async:!0,dataType:"json",data:{wordId:editWordId,word:word,translation:translation,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){for(var t=0;t<selectedWordList.length;t++)if(selectedWordList[t].wordId==wid){selectedWordList[t].word=word,selectedWordList[t].translation=translation;break}new Noty({theme:"mint",text:"Success! Word edited!",type:"success",layout:"bottomRight",timeout:3e3}).show(),$("#editWordModal").modal("toggle"),UpdateTable()},error:function(o){401==o.status&&SessionExpired()}})}function WordBookUpdateStatus(o){$.ajax({url:"/api/word/status/update",method:"POST",async:!0,dataType:"json",data:{words:JSON.stringify(selected),status:o,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(t){for(var e=0;e<selectedWordList.length;e++)for(var r=0;r<selected.length;r++)if(selectedWordList[e].wordId==selected[r]){console.log(selectedWordList[e].wordId),selectedWordList[e].status=o;break}new Noty({theme:"mint",text:"Success! Word status updated!",type:"success",layout:"bottomRight",timeout:3e3}).show(),UpdateTable()},error:function(o){401==o.status&&SessionExpired()}})}function ShowWordDatabase(){$(".manage").hide(),$("#addExistingWord").show(),$(".word-book-name").html(wordBookName),selected=[],table=$("#wordList").DataTable(),table.clear();for(var o=0;o<wordList.length;o++)table.row.add([[wordList[o].word],[wordList[o].translation],[l[wordList[o].status]]]).node().id=wordList[o].wordId;table.draw()}function ShowManage(){$("#addExistingWord").hide(),$(".manage").show(),UpdateTable()}function AddExistingWord(){$.ajax({url:"/api/wordBook/addWord",method:"POST",async:!1,dataType:"json",data:{words:JSON.stringify(selected),wordBookId:wordBookId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(new Noty({theme:"mint",text:"Success! Added "+selected.length+" word(s)!",type:"success",layout:"bottomRight",timeout:3e3}).show(),UpdateWordBookList(!1),MapWordList(),SelectWords(),UpdateTable()):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function AddWordShow(){$("#edit-word").val(""),$("#edit-translation").val(""),$("#editWordModalLabel").html("Add a new word to "+wordBookName),$("#editWordModal").modal("toggle"),$("#edit-word-btn").html("Add"),$("#edit-word-btn").attr("onclick","AddWord()")}function AddWord(){word=$("#edit-word").val(),translation=$("#edit-translation").val(),$.ajax({url:"/api/word/add",method:"POST",async:!0,dataType:"json",data:{word:word,translation:translation,addToWordBook:wordBookId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(new Noty({theme:"mint",text:"Success! Added a new word!",type:"success",layout:"bottomRight",timeout:3e3}).show(),$("#editWordModal").modal("toggle"),UpdateWordList(!1),UpdateWordBookList(!1),MapWordList(),SelectWords(),UpdateTable()):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function RemoveFromWordBook(){$.ajax({url:"/api/wordBook/deleteWord",method:"POST",async:!1,dataType:"json",data:{words:JSON.stringify(selected),wordBookId:wordBookId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(new Noty({theme:"mint",text:"Success! Removed "+selected.length+" word(s) from this word book!",type:"success",layout:"bottomRight",timeout:3e3}).show(),UpdateWordBookList(!1),MapWordList(),SelectWords(),UpdateTable()):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function RemoveWordShow(){$("#deleteWordModal").modal("toggle")}function RemoveWord(){$.ajax({url:"/api/word/delete",method:"POST",async:!1,dataType:"json",data:{words:JSON.stringify(selected),userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(new Noty({theme:"mint",text:"Success! Removed "+selected.length+" word(s) from database!",type:"success",layout:"bottomRight",timeout:3e3}).show(),$("#deleteWordModal").modal("toggle"),UpdateWordList(!1),UpdateWordBookList(!1),MapWordList(),SelectWords(),UpdateTable()):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function WordBookClone(){$.ajax({url:"/api/wordBook/clone",method:"POST",async:!1,dataType:"json",data:{fromWordBook:wordBookId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?new Noty({theme:"mint",text:"Success! Cloned this word book!",type:"success",layout:"bottomRight",timeout:3e3}).show():new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function WordBookRenameShow(){$("#renameModal").modal("toggle"),$("#word-book-rename").val(wordBookName)}function WordBookRename(){newName=$("#word-book-rename").val(),""!=newName?$.ajax({url:"/api/wordBook/rename",method:"POST",async:!1,dataType:"json",data:{wordBookId:wordBookId,name:newName,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(wordBookName=newName,$(".word-book-name").html(wordBookName),$(".title").html(wordBookName),$("title").html("Word Memo - "+wordBookName),new Noty({theme:"mint",text:"Success! Word book renamed!",type:"success",layout:"bottomRight",timeout:3e3}).show(),$("#renameModal").modal("toggle")):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):new Noty({theme:"mint",text:"Enter new name!",type:"warning",layout:"bottomRight",timeout:3e3}).show()}function WordBookDeleteShow(){$("#deleteWBModal").modal("toggle"),$(".word-book-name").html(wordBookName)}function WordBookDelete(){$("#word-book-delete").val()==wordBookName?$.ajax({url:"/api/wordBook/delete",method:"POST",async:!1,dataType:"json",data:{wordBookId:wordBookId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(new Noty({theme:"mint",text:"Success! Word book deleted!",type:"success",layout:"bottomRight",timeout:3e3}).show(),setTimeout(BackToHome,3e3)):new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):new Noty({theme:"mint",text:"Type the name of the word book correctly to continue!",type:"warning",layout:"bottomRight",timeout:3e3}).show()}function WordBookShare(){""==wordBookShareCode?$.ajax({url:"/api/wordBook/share",method:"POST",async:!1,dataType:"json",data:{wordBookId:wordBookId,operation:"share",userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].shareCode=o.shareCode,wordBookShareCode=o.shareCode,localStorage.setItem("word-book-list",JSON.stringify(wordBookList));break}new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show(),$("#wordBookShareCode").html(o.shareCode),$("#shareop").html("Unshare"),$(".only-shared").show()}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):$.ajax({url:"/api/wordBook/share",method:"POST",async:!1,dataType:"json",data:{wordBookId:wordBookId,operation:"unshare",userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].shareCode="",wordBookShareCode="",localStorage.setItem("word-book-list",JSON.stringify(wordBookList));break}new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e3}).show(),$("#wordBookShareCode").html("(Private)"),$("#shareop").html("Share"),$(".only-shared").hide()}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function CreateGroupShow(){$("#create-group-btn").attr("onclick","CreateGroup()"),$("#create-group-btn").html("Create"),$("#createGroupModalLabel").html("Create Group"),$("#createGroupModal").modal("toggle")}function CreateGroup(){gname=$("#group-name").val(),gdescription=$("#group-description").val(),""!=gname&&""!=gdescription?$.ajax({url:"/api/group",method:"POST",async:!1,dataType:"json",data:{wordBookId:wordBookId,name:gname,description:gdescription,operation:"create",userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].groupId=o.groupId,wordBookList[t].groupCode=o.groupCode,wordBookList[t].isGroupOwner=o.isGroupOwner,groupId=o.groupId,groupCode=o.groupCode,isGroupOwner=o.isGroupOwner,$("#groupCode").html(groupCode),$(".only-group-exist").show(),$(".only-group-inexist").hide(),$(".only-group-owner").show(),localStorage.setItem("word-book-list",JSON.stringify(wordBookList));break}$("#createGroupModal").modal("toggle"),new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show(),$("#wordBookShareCode").html(o.shareCode),$("#shareop").html("Unshare")}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):new Noty({theme:"mint",text:"Both fields must be filled!",type:"warning",layout:"topLeft",timeout:3e3}).show()}function GroupMember(){window.location.href="/group?groupId="+groupId}function QuitGroupShow(){$("#quitGroupModal").modal("toggle")}function QuitGroup(){$.ajax({url:"/api/group/quit",method:"POST",async:!1,dataType:"json",data:{groupId:groupId,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].groupId=-1,wordBookList[t].groupCode="",wordBookList[t].isGroupOwner=!1,groupId=-1,groupCode="",isGroupOwner=!1,$("#groupCode").html(groupCode),$(".only-group-exist").show(),$(".only-group-inexist").hide(),$(".only-group-owner").show(),localStorage.setItem("word-book-list",JSON.stringify(wordBookList)),localStorage.setItem("groupId","-1");break}$("#quitGroupModal").modal("toggle"),new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show()}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function GroupInfoUpdateShow(){$("#create-group-btn").attr("onclick","GroupInfoUpdate()"),$("#create-group-btn").html("Update"),$("#createGroupModalLabel").html("Update Group Information"),$("#createGroupModal").modal("toggle")}function GroupInfoUpdate(){gname=$("#group-name").val(),gdescription=$("#group-description").val(),""!=gname&&""!=gdescription?$.ajax({url:"/api/group/manage",method:"POST",async:!1,dataType:"json",data:{groupId:groupId,name:gname,description:gdescription,operation:"updateInfo",userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].name=gname,wordBookName=gname,$(".word-book-name").html(wordBookName),$(".title").html(wordBookName),$("title").html("Word Memo - "+wordBookName),$("#groupCode").html(groupCode),$(".only-group-exist").show(),$(".only-group-inexist").hide(),$(".only-group-owner").show(),localStorage.setItem("word-book-list",JSON.stringify(wordBookList)),localStorage.setItem("groupId","-1");break}$("#createGroupModal").modal("toggle"),new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show()}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):new Noty({theme:"mint",text:"Both fields must be filled!",type:"warning",layout:"topLeft",timeout:3e3}).show()}function GroupCodeUpdate(o){$.ajax({url:"/api/group/code/update",method:"POST",async:!1,dataType:"json",data:{groupId:groupId,operation:o,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].groupCode=o.groupCode,groupCode=o.groupCode,$("#groupCode").html(groupCode),localStorage.setItem("word-book-list",JSON.stringify(wordBookList));break}new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show()}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}})}function GroupDismissShow(){$("#dismissGroupModal").modal("toggle"),$(".word-book-name").html(wordBookName)}function GroupDismiss(){$("#group-delete").val()==wordBookName?$.ajax({url:"/api/group",method:"POST",async:!1,dataType:"json",data:{groupId:groupId,operation:"dismiss",userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){if(1==o.success){for(var t=0;t<wordBookList.length;t++)if(wordBookList[t].wordBookId==wordBookId){wordBookList[t].groupId=-1,wordBookList[t].groupCode="",wordBookList[t].isGroupOwner=!1,groupId=-1,groupCode="",isGroupOwner=!1,$("#groupCode").html(groupCode),$(".only-group-exist").hide(),$(".only-group-inexist").show(),$(".only-group-owner").hide(),localStorage.setItem("word-book-list",JSON.stringify(wordBookList));break}new Noty({theme:"mint",text:o.msg,type:"success",layout:"bottomRight",timeout:3e4}).show(),$("#dismissGroupModal").modal("toggle")}else new Noty({theme:"mint",text:o.msg,type:"error",layout:"bottomRight",timeout:3e3}).show()},error:function(o){401==o.status&&SessionExpired()}}):new Noty({theme:"mint",text:"Type the name of the group correctly to continue!",type:"warning",layout:"bottomRight",timeout:3e3}).show()}function selectAll(){$("#wordList tr").each(function(){wid=parseInt($(this).attr("id")),wid!=wid||$(this).hasClass("selected")||selected.push(wid),$(this).addClass("selected")})}function deselectAll(){$("#wordList tr").each(function(){wid=parseInt($(this).attr("id")),wid==wid&&$(this).hasClass("selected")&&(idx=selected.indexOf(wid),idx>-1&&selected.splice(idx,1)),$(this).removeClass("selected")})}function UpdateWordBookDisplay(){$(".wordbook").remove(),$("#wordbook-list").append('<div class="wordbook">        <p>Create Word Book: </p>        <div class="input-group mb-3 w-75">            <span class="input-group-text" id="basic-addon1">Name</span>            <input type="text" class="form-control" id="create-word-book-name" aria-describedby="basic-addon1">            <div class="input-group-append">                <button class="btn btn-outline-primary" type="button" onclick="CreateWordBook()">Create</button>            </div>        </div>        </div>');for(var o=0;o<wordBookList.length;o++)wordBook=wordBookList[o],wcnt="",0==wordBook.wordBookId?wcnt=wordBook.words.length+" words":wcnt=wordBook.progress+" memorized / "+wordBook.words.length+" words",btn="",wordBook.wordBookId!=wordBookId?btn='<button type="button" class="btn btn-primary " onclick="SelectWordBook('+wordBook.wordBookId+')">Select</button>':btn='<button type="button" class="btn btn-secondary">Selected</button>',$("#wordbook-list").append('<div class="wordbook">        <p>'+wordBook.name+"</p>        <p>"+wcnt+'</p>        <button type="button" class="btn btn-primary " onclick="OpenWordBook('+wordBook.wordBookId+')">Open</button>        '+btn+"        <hr>        </div>")}function HideWordBookList(){$("#wordbook").animate({left:"-60%"},{queue:!1,duration:500}),$("#window").hide(),$(".manage").fadeIn(),$("table").attr("style","opacity:1")}function ShowWordBook(){$("#wordbook").animate({left:"0"},{queue:!1,duration:500}),UpdateWordBookDisplay(),$("#window").show(),$(".manage").fadeOut(),$("table").attr("style","opacity:0.5")}function OpenWordBook(o){window.location.href="/wordbook?wordBookId="+o}function SelectWordBook(o){wordBookId=o,localStorage.setItem("memo-word-book-id",wordBookId),UpdateWordBookDisplay()}function CreateWordBook(){wordBookName=$("#create-word-book-name").val(),""!=wordBookName?$.ajax({url:"/api/wordBook/create",method:"POST",async:!0,dataType:"json",data:{name:wordBookName,userId:localStorage.getItem("userId"),token:localStorage.getItem("token")},success:function(o){1==o.success?(UpdateWordBookList(!1),UpdateWordBookDisplay(),new Noty({theme:"mint",text:"Success!",type:"success",layout:"topLeft",timeout:3e3}).show()):new Noty({theme:"mint",text:o.msg,type:"error",layout:"topLeft",timeout:3e3}).show()},error:function(o){401==o.status&&(alert("Login session expired! Please login again!"),localStorage.removeItem("userId"),localStorage.removeItem("token"),window.location.href="/user")}}):new Noty({theme:"mint",text:"Enter a word book name!",type:"warning",layout:"topLeft",timeout:3e3}).show()}var wordBookId=-1,wordBookName="",wordBookShareCode="",groupId=-1,groupCode="",isGroupOwner=!1,wordList=JSON.parse(lsGetItem("word-list",JSON.stringify([]))),wordBookList=JSON.parse(lsGetItem("word-book-list",JSON.stringify([]))),selectedWordList=[],wordListMap=new Map,selected=[],editWordId=-1;